@inject NavigationManager NavigationManager

<div>
    <select @bind="Culture">
        <option value="es-ES">Español</option>
        <option value="en-US">English</option>
    </select>
</div>

@code {
    private FluentMenuButton menuButton = new();

    protected override void OnInitialized()
    {
        Culture = CultureInfo.CurrentCulture;
    }
    private CultureInfo Culture{
        get{ return CultureInfo.CurrentCulture; }
        set{if(CultureInfo.CurrentCulture != value){
                var uri = new Uri(NavigationManager.Uri)
                .GetComponents(UriComponents.PathAndQuery, UriFormat.Unescaped);
                var cultureEscaped = Uri.EscapeDataString(value.Name);
                var uriEscaped = Uri.EscapeDataString(uri);

                NavigationManager.NavigateTo($"Culture/Set?culture={cultureEscaped}&redirectUri={uriEscaped}", forceLoad:true);
            }}
    }
}
